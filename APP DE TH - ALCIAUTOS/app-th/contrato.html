<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Generar Contrato</title>
  <link rel="stylesheet" href="css/estilos.css" />
</head>
<body class="fondo-negro">
  <header>
    Generar Contrato
  </header>

  <main>
    <form id="form-contrato" class="formulario">
      <h2>Datos del colaborador</h2>

      <div class="grupo-campo">
        <label for="nombre">Nombre completo</label>
        <input type="text" id="nombre" name="nombre" required />
      </div>

      <div class="grupo-campo">
        <label for="documento">Número de documento</label>
        <input type="text" id="documento" name="documento" required />
      </div>

      <div class="grupo-campo">
        <label for="cargo">Cargo</label>
        <input type="text" id="cargo" name="cargo" required />
      </div>

      <div class="grupo-campo">
        <label for="empresa">Empresa</label>
        <select id="empresa" name="empresa" required>
          <option value="">Seleccione</option>
          <option value="Alciautos">Alciautos</option>
          <option value="Alcalá">Alcalá</option>
          <option value="Allcar">Allcar</option>
          <option value="Alborautos">Alborautos</option>
          <option value="Carmultiple">Carmultiple</option>
        </select>
      </div>

      <div class="grupo-campo">
        <label for="tipoContrato">Tipo de contrato</label>
        <select id="tipoContrato" name="tipoContrato" required>
          <option value="">Seleccione</option>
          <option value="fijo">Fijo</option>
          <option value="indefinido">Indefinido</option>
          <option value="obra labor">Obra Labor</option>
        </select>
      </div>

      <div class="grupo-campo oculto" id="duracionContainer">
        <label for="duracion">Duración (meses)</label>
        <input type="number" id="duracion" name="duracion" min="1" />
      </div>

      <div class="grupo-campo oculto" id="finContainer">
        <label for="fechaFin">Fecha de finalización</label>
        <input type="text" id="fechaFin" name="fechaFin" readonly />
      </div>

      <div class="grupo-campo">
        <label for="fechaIngreso">Fecha de ingreso</label>
        <input type="date" id="fechaIngreso" name="fechaIngreso" required />
      </div>

      <div class="grupo-campo">
        <label for="salario">Salario mensual</label>
        <input type="number" id="salario" name="salario" required />
      </div>

      <div class="grupo-campo">
        <label for="kpi">KPI (opcional)</label>
        <input type="number" id="kpi" name="kpi" placeholder="Solo si aplica" />
      </div>

      <div class="grupo-campo">
        <label for="jornada">Jornada laboral</label>
        <input type="text" id="jornada" name="jornada" placeholder="Ej: Lunes a viernes de 8am a 6pm" required />
      </div>

      <button type="submit" class="boton-enviar">Generar Documento</button>
    </form>

    <a href="inicio.html" class="btn-volver">← Volver al inicio</a>
  </main>

  <footer class="footer-con-logo">
    <p>Alci Gestión Humana © 2025 – Todos los derechos reservados</p>
    <img src="assets/logo-alciautos.png" alt="Logo Alciautos" class="logo-footer" />
  </footer>

  <script>
    const tipoContrato = document.getElementById('tipoContrato');
    const duracionContainer = document.getElementById('duracionContainer');
    const duracionInput = document.getElementById('duracion');
    const fechaIngresoInput = document.getElementById('fechaIngreso');
    const fechaFinInput = document.getElementById('fechaFin');
    const finContainer = document.getElementById('finContainer');

    tipoContrato.addEventListener('change', function () {
      if (this.value === 'fijo' || this.value === 'obra labor') {
        duracionContainer.classList.remove('oculto');
        finContainer.classList.remove('oculto');
      } else {
        duracionContainer.classList.add('oculto');
        finContainer.classList.add('oculto');
        fechaFinInput.value = '';
      }
    });

    function calcularFechaFin() {
      const fechaIngreso = new Date(fechaIngresoInput.value);
      const meses = parseInt(duracionInput.value);

      if (!isNaN(fechaIngreso) && !isNaN(meses)) {
        const fechaFin = new Date(fechaIngreso);
        fechaFin.setMonth(fechaFin.getMonth() + meses);
        fechaFin.setDate(fechaFin.getDate() - 1);
        fechaFinInput.value = fechaFin.toISOString().split('T')[0];
      } else {
        fechaFinInput.value = '';
      }
    }

    fechaIngresoInput.addEventListener('change', calcularFechaFin);
    duracionInput.addEventListener('input', calcularFechaFin);
  </script>
</body>
</html>
